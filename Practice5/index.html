<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Мой сайт</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="bootstrap_syles.css" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<body>
    <!-- Шапка  -->
    <div class="top-header bg-dark text-white py-3">
        <div class="container d-flex align-items-center justify-content-between">
            <div class="d-flex align-items-center">
                
                <a href="prak1.html" class="logoHref">
                    <img src="static/logo.jpg" class="logo-image" alt="Логотип" style="height: 55px;">
                </a> <!-- Логотип -->
                <h1 class="mb-0 me-3" style="font-size: 24px;">АвтоЛюкс</h1> <!-- Название -->
            </div>
    
            <!-- Информация о группе и авторе -->
            <div class="text-right">
                <p class="mb-1">Группа ЭФБО-02-23</p>
                <p class="mb-0">Аброськин Кирилл Алексеевич</p>
            </div>
        </div>
    </div>
    
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

    <!-- Меню под шапкой -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light border-top border-bottom">
        <div class="container">
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link animation" href="prak1.html">Главная</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link animation" href="prak1(3).html">Первый семестр</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link animation" href="prak1(4).html">Второй семестр</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link animation" href="prak1(2).html">Услуги</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link animation" href="#">Авторизация</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Навигация -->
    <nav id="page-navigation" class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom custom-navbar">
        <div class="container">
            <ul class="navbar-nav mx-auto">
                <li class="nav-item">
                    <a class="nav-link" href="#projects">Проекты</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#products">Товары</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#contacts">Контакты</a>
                </li>
            </ul>
        </div>
    </nav>


    <!-- Аккордеон -->
    <div class="accordion" id="infoAccordion">
        <!-- Вкладка "Биография" -->
        <div class="card">
            <div class="card-header" id="headingBio">
                <h5 class="mb-0">
                    <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapseBio" aria-expanded="false" aria-controls="collapseBio">
                        Биография
                    </button>
                </h5>
            </div>
            <div id="collapseBio" class="collapse" aria-labelledby="headingBio" data-parent="#infoAccordion">
                <div class="accordion-text">
                    Lorem ipsum dolor sit amet consectetur, adipisicing elit. Incidunt earum explicabo fugit voluptate inventore itaque totam fugiat dicta soluta iusto! Omnis dignissimos at impedit incidunt temporibus non exercitationem asperiores minima beatae magnam optio similique dolorum perferendis sit sunt tempora a, ut distinctio, odio recusandae ipsam. Tempore excepturi ipsam iste commodi. Lorem ipsum dolor sit amet consectetur adipisicing elit. Quos blanditiis repellat esse praesentium, labore numquam voluptates? Aut omnis eveniet officiis. Similique obcaecati atque, sunt hic assumenda asperiores aliquid consectetur laudantium, nostrum in impedit accusantium aliquam laboriosam iusto eos aut adipisci! Lorem ipsum dolor sit amet consectetur adipisicing elit. Sed veniam laboriosam numquam exercitationem reprehenderit. Minus, pariatur? Placeat amet sit ex nemo porro voluptatibus officiis, tenetur tempora nesciunt, eaque iste voluptatum perferendis odio atque hic quibusdam obcaecati veritatis. Mollitia libero, natus dolor suscipit cumque in itaque recusandae consequatur aliquam minus, provident, exercitationem delectus! Aliquid labore nostrum delectus voluptatibus beatae fuga nihil.
                </div>
            </div>
        </div>
        <!-- Вкладка "Раскрытие информации" -->
        <div class="card">
            <div class="card-header" id="headingDisclosure">
                <h5 class="mb-0">
                    <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#collapseDisclosure" aria-expanded="false" aria-controls="collapseDisclosure">
                        Раскрытие информации
                    </button>
                </h5>
            </div>
            <div id="collapseDisclosure" class="collapse" aria-labelledby="headingDisclosure" data-parent="#infoAccordion">
                <div class="card-body">
                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th>Наименование показателя</th>
                                <th>2022</th>
                                <th>2023</th>
                                <th>2024</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Капитал</td>
                                <td>1 234 293</td>
                                <td>1 703 229</td>
                                <td>2 322 001</td>
                            </tr>
                            <tr>
                                <td>Чистый долг</td>
                                <td>6 780 202</td>
                                <td>5 118 320</td>
                                <td>5 002 400</td>
                            </tr>
                            <tr>
                                <td>Чистая прибыль</td>
                                <td>822 001</td>
                                <td>911 450</td>
                                <td>1 200 541</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>



    <!-- Слайдер с картинками -->
    <div class="container my-4">
        <h2 id="projects">Витрина</h2>
        <div id="carouselExampleIndicators" class="carousel slide mb-4" data-ride="carousel">
            <ol class="carousel-indicators">
                <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
                <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
            </ol>
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img src="static/challenger.jpg" class="d-block w-100" alt="Слайд 1">
                </div>
                <div class="carousel-item">
                    <img src="static/mustang.jpg" class="d-block w-100" alt="Слайд 2">
                </div>
                <div class="carousel-item">
                    <img src="static/silvia.jpg" class="d-block w-100" alt="Слайд 3"> <!--img src="https://via.placeholder.com/800x300"-->
                </div>
            </div>
            <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>
    </div>

    <!-- Мои товары -->
    <div class="container my-4">
        <h2 id="products">Мои товары</h2>
        <div class="d-flex overflow-auto" id="product-list">
            <!-- Здесь товары -->
        </div>
    </div>

    <div class="container my-5">
        <h2 class="text-center mb-5">Бесплатный тест-драйв</h2>
        <div class="text-center">
            <video width="100%" height="auto" autoplay muted loop>
                <source src="static/bmw.mp4" type="video/mp4">
                Ваш браузер не поддерживает видео.
            </video>
        </div>
    </div>
    
    <!-- Форма "Оставить заявку" -->
    <div class="container my-5">
        <div class="form-container bg-light p-4 rounded">
            <h2 class="text-center mb-4">Оставить заявку</h2>
            <form>
                <div class="form-group">
                    <label for="name">Ваше имя</label>
                    <input type="text" class="form-control" id="name" placeholder="Введите ваше имя" required>
                </div>
                
                <div class="form-group">
                    <label for="email">Электронная почта</label>
                    <input type="email" class="form-control" id="email" placeholder="Введите вашу почту" required>
                </div>
                
                <div class="form-group">
                    <label for="phone">Телефон</label>
                    <input type="tel" class="form-control" id="phone" placeholder="Введите ваш телефон" required>
                </div>
                
                <div class="form-group">
                    <label for="service">Выберите услугу</label>
                    <select class="form-control" id="service" required>
                        <option value="" disabled selected>Выберите услугу</option>
                        <option value="consultation">Консультация</option>
                        <option value="development">Тест-драйв</option>
                        <option value="support">Техническая поддержка</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="message">Сообщение</label>
                    <textarea class="form-control" id="message" rows="4" placeholder="Ваше сообщение" required></textarea>
                </div>
                
                <button type="submit" class="btn btn-primary btn-block">Отправить заявку</button>
            </form>
        </div>
    </div>

    <div class="container my-5">
        <h2>Чат поддержки</h2>
        <div id="chat" class="border p-3" style="height: 300px; overflow-y: auto; background: #f1f1f1;">
            <!-- Сообщения будут появляться здесь -->
        </div>
        <input type="text" id="chatInput" class="form-control my-2" placeholder="Введите сообщение...">
        <button onclick="sendMessage()" class="btn btn-primary">Отправить</button>
    </div>

    <div class="footer bg-light text-white py-3">
        <div class="container my-5">
            <h2 class="text-left mb-4">Лицензия</h2>
            <!-- Встроенный PDF-файл для просмотра -->
            <div class="text-center mt-4">
                <iframe src="static/license.pdf" width="100%" height="600px" style="border: none;"></iframe>
            </div>
        </div>
    </div>

    <!-- Сноска с контактами -->
    <footer class="footer bg-dark text-white py-4">
        <div class="container text-center">
            <p class="mb-2" id="contacts">Контактная информация:</p>
            <ul class="list-unstyled">
                <li><strong>Телефон:</strong> +7 (800) 800-78-78</li>
                <li><strong>Электронная почта:</strong> info@example.com</li>
                <li><strong>Адрес:</strong> ул. Ленина, 1, Москва, Россия</li>
            </ul>
            <p class="mb-0">© 2024 Все права защищены.</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', loadProducts);
    
        async function loadProducts() {
            const query = `
                {
                    products {
                        name
                        price
                        description
                    }
                }
            `;
    
            try {
                const response = await fetch('http://localhost:3000/graphql', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ query })
                });
    
                const result = await response.json();
                displayProducts(result.data.products);
            } catch (error) {
                console.error('Ошибка загрузки товаров:', error);
            }
        }
    
        function displayProducts(products) {
            const container = document.getElementById('product-list');
            container.innerHTML = '';
    
            products.forEach(product => {
                const card = document.createElement('div');
                card.classList.add('product-card', 'card');
    
                card.innerHTML = `
                    <div class="product-body">
                        <h5 class="card-title">${product.name}</h5>
                        <p class="card-price">Цена: ${product.price} ₽</p>
                        <p class="card-text">Описание: ${product.description}</p>
                    </div>
                `;
    
                container.appendChild(card);
            });
        }


        //webSocket клиент
        const socket = new WebSocket('ws://localhost:3000');

        socket.onopen = () => {
            console.log('Соединение установлено');
        };

        socket.onmessage = (event) => {
            const chat = document.getElementById('chat');

            // Проверка, является ли сообщение Blob
            if (event.data instanceof Blob) {
                const reader = new FileReader();
                reader.onload = () => {
                    const message = document.createElement('div');
                    message.textContent = reader.result;  // Вывод текста
                    chat.appendChild(message);
                    chat.scrollTop = chat.scrollHeight;
                };
                reader.readAsText(event.data);
            } else {
                // Если это текст, просто отображаем его
                const message = document.createElement('div');
                message.textContent = event.data;
                chat.appendChild(message);
                chat.scrollTop = chat.scrollHeight;
            }
        };

        // Отправка сообщения
        const sendMessage = () => {
            const messageInput = document.getElementById('chatInput');
            const message = messageInput.value;
            socket.send(message);  // Отправляем сообщение на сервер WebSocket
            messageInput.value = '';  // Очищаем поле ввода

            // Отображаем собственное сообщение на клиенте
            const chat = document.getElementById('chat');
            const messageElement = document.createElement('div');
            messageElement.textContent = `Вы: ${message}`;
            chat.appendChild(messageElement);
            chat.scrollTop = chat.scrollHeight;
        };

        socket.onclose = () => {
            console.log('Соединение закрыто');
        };


    </script>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
</body>
</html>